---
title: 理解shell脚本中的2_&1
date: 2023-11-05 16:13:03
updated: 2024-08-15 22:35:58
tags: linux文件描述符
---
﻿#### 问题描述:
&nbsp;&nbsp;&nbsp;&nbsp;最近在写crontab的时候,看到一条0 10 * * * * sh /abc/f.sh > /abc/log  2>&1大致长成这样的一条定时任务。不知道最后面的2>&1是起什么作用的,然后就去学习了一下。
#### 问题分析:
&nbsp;&nbsp;&nbsp;&nbsp;1.首先我们看前面的0 10 * * * * sh /abc/f.sh > /abc/log,这个比较好理解，意思是每天的10点整去执行f.sh脚本,并且将标准输出重定向到log文件中
&nbsp;&nbsp;&nbsp;&nbsp;2.我们再来看后面的2>&1， 然后我们还得知道一个概念，文件描述符，可以参考下,[wiki对文件描述符的简绍](https://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6)和[文件描述符的原理链接](https://segmentfault.com/a/1190000009724931)。简单的来说就是有一个整数，它的枚举值是0（标准输入），1（标准输出），2（标准错误），然后0是从键盘输入，1和2都是输出到屏幕上。
&nbsp;&nbsp;&nbsp;&nbsp;3.我们了解了整数的含义之后再来看就比较好理解了，对于重定向符号">",我们可以这么理解: 文件描述符 > 文件.比如 ls > a.txt,就是说把ls的输出存入a.txt, >等于 1 >, 所以写成ls 1> a.txt也是一样的效果.如果>后面是&1就是用来表示这是文件描述符.
&nbsp;&nbsp;&nbsp;&nbsp;4.0 10 * * * * sh /abc/f.sh > /abc/log  2>&1所以这个命令就是说把执行结果的标准输出放入到log文件，又因为2>&1(标准错误也重定向到标准输入，之前标准输入已经重定向到了log),因此这个命令的正确执行和报错都会放入到log文件中。
#### 实例：
我们可以看下面的两个例子：![在这里插入图片描述](https://img-blog.csdnimg.cn/20190313231526748.png)
1.首先由f，log两个文件，ll f1 > log 2 >&1,意思是标准输出和错误都输出到log中,所以cat log中有错误信息。
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190313231538159.png)
2.再看第二个,首先由f，log两个文件，ll f2 > log >&2,意思是标准输出重定向到log中,标准输出又重定向到标准错误中,因为标准错误是输出到屏幕的,所以不管ll f2是存在还是不存在都会在屏幕上显示出来。
